tabIndent={version:"0.1.8",config:{tab:"\t"},events:{keydown:function(e){var t=tabIndent.config.tab;var n=t.length;if(e.keyCode===9){e.preventDefault();var i=this.selectionStart,s=this.selectionEnd;if(e.shiftKey===false){if(!tabIndent.isMultiLine(this)){this.value=this.value.slice(0,i)+t+this.value.slice(i);this.selectionStart=i+n;this.selectionEnd=s+n}else{var a=tabIndent.findStartIndices(this),l=a.length,r=undefined,d=undefined,u=0;while(l--){var h=a[l];if(a[l+1]&&i!=a[l+1])h=a[l+1];if(h>=i&&a[l]<s){this.value=this.value.slice(0,a[l])+t+this.value.slice(a[l]);r=a[l];if(!d)d=a[l+1]?a[l+1]-1:"end";u++}}this.selectionStart=r;this.selectionEnd=d!=="end"?d+n*u:this.value.length}}else{if(!tabIndent.isMultiLine(this)){if(this.value.substr(i-n,n)==t){this.value=this.value.substr(0,i-n)+this.value.substr(i);this.selectionStart=i-n;this.selectionEnd=s-n}else if(this.value.substr(i-1,1)=="\n"&&this.value.substr(i,n)==t){this.value=this.value.substring(0,i)+this.value.substr(i+n);this.selectionStart=i;this.selectionEnd=s-n}}else{var a=tabIndent.findStartIndices(this),l=a.length,r=undefined,d=undefined,u=0;while(l--){var h=a[l];if(a[l+1]&&i!=a[l+1])h=a[l+1];if(h>=i&&a[l]<s){if(this.value.substr(a[l],n)==t){this.value=this.value.slice(0,a[l])+this.value.slice(a[l]+n);u++}else{}r=a[l];if(!d)d=a[l+1]?a[l+1]-1:"end"}}this.selectionStart=r;this.selectionEnd=d!=="end"?d-u*n:this.value.length}}}else if(e.keyCode===27){tabIndent.events.disable(e)}else if(e.keyCode===13&&e.shiftKey===false){var A=tabIndent,c=this.selectionStart,a=A.findStartIndices(this),o=a.length,v=0,f=0,b=new RegExp("^"+t.replace("\t","\\t").replace(/ /g,"\\s")+"+","g"),g="";tabs=null;for(var I=0;I<o;I++){if(a[I+1]&&c>=a[I]&&c<a[I+1]){v=a[I];f=a[I+1]-1;break}else{v=a[o-1];f=this.value.length}}g=this.value.slice(v,f);tabs=g.match(b);if(tabs!==null){e.preventDefault();var m=tabs[0];var E=m.length;var w=c-v;if(E>w){E=w;m=m.slice(0,w)}this.value=this.value.slice(0,c)+"\n"+m+this.value.slice(c);this.selectionStart=c+E+1;this.selectionEnd=this.selectionStart}}},disable:function(e){var t=this;tabIndent.remove(e.target)},focus:function(){var e=tabIndent,t=this,n=setTimeout((function(){var n=(t.getAttribute("class")||"").split(" "),i=n.indexOf("tabIndent");t.addEventListener("keydown",e.events.keydown);t.style.backgroundImage="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAEgAAABIAEbJaz4AAAKZSURBVEjH7ZRfSFNRHMe/9+/+3G26tUn+ycywgURgUBAUJlIhWlEQEjN8yQcfolKJxJAefOjRCnT0IPYQ9iRa9FAYJiaUVP4twf7gzJzpnDbdzHt3z+3Fua3dO4Ne/f5ezjmc8+F7zvmeA2zrv0VFGlexAssFw1mG1pqqUL8npGY60Bw3ykYaOVjlrFXmEyw0AQj6g53UONQBO8DBzuiT2tUx+gR/mwACBQpIUoACBZoAZaOSiWwFIFs4oMMS9/boZVF8T8vtkbEofatiRKF9mXK6M7tTyyxRaPwWtJezIu9+9cNzxHk/n9938rz6IWpvgRdZd5/HcsvC9jadqk6Z0qkBiCaAF3UtX8cy6h1mwlnLhsuZuRvqABlyNJqb0q0ZWsb7uUVHlXAahWl1y3M2tVuQVR1Q0Pl0dwZ67KbZtGnX/ma++/FsCCY1ANlAxIuT2NZP3XB/GRKc9qKhKTYnd4auJbIqINEBDa5zoWWByoS1jocR+loKpKGJKqBLybN/OQN2Tmodv4jCtYIMYurnP5sLf+V5XK4DbFv4haaDCEABA/J88GdegD1I2+heY0Xj7M1itiMjP8srzutjXMbkIDZKCrAcfGOt8LwODimYnzzjLcHIx5VFwPekZrhVPYmxyVNAvZP8KV28SykClo6XF4/t9LpC2TTIteulJepJjD5nCjL8E56sMHt40NYYqE51ZnZIfmGXYBC68p/6v6UkApSI8Y2ejPVKhyE0PdLDPcg+Z003G0W7YUmmvo/WtjXgbiKAAQNGpjYRDOwWILx3dV16ZBsx3QsdYi4JNUw6uCvMbrUcWFAvPWznfH9/GQHR5xAbPuTumRFWvS+ZwDGyJFfidkxWk2oaIfTRk8RI0YqMAQBAL7YVrz/iUDx4QII4/QAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxMi0xMi0wMVQwMDowNjo0My0wNTowMLKpTWYAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTItMTItMDFUMDA6MDY6NDMtMDU6MDDD9PXaAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==)";t.style.backgroundPosition="top right";t.style.backgroundRepeat="no-repeat";if(i!==-1)n.splice(i,1);n.push("tabIndent-rendered");t.setAttribute("class",n.join(" "));t.removeEventListener("focus",e.events.keydown)}),500);t.addEventListener("blur",(function e(){clearTimeout(n);t.removeEventListener("blur",e)}))}},render:function(e){var t=this;if(e.nodeName==="TEXTAREA"){e.addEventListener("focus",t.events.focus);e.addEventListener("blur",(function e(n){t.events.disable(n)}))}},renderAll:function(){var e=document.getElementsByTagName("textarea"),t=e.length,n=-1,i=[],s=undefined;while(t--){i=(e[t].getAttribute("class")||"").split(" ");n=i.indexOf("tabIndent");if(n!==-1){s=e[t];this.render(s)}n=-1;i=[];s=undefined}},remove:function(e){if(e.nodeName==="TEXTAREA"){var t=(e.getAttribute("class")||"").split(" "),n=t.indexOf("tabIndent-rendered");if(n!==-1){e.removeEventListener("keydown",this.events.keydown);e.style.backgroundImage="";t.splice(n,1);t.push("tabIndent");e.setAttribute("class",t.length>1?t.join(" "):t[0])}}},removeAll:function(){var e=document.getElementsByTagName("textarea"),t=e.length,n=-1,i=[],s=undefined;while(t--){i=(e[t].getAttribute("class")||"").split(" ");n=i.indexOf("tabIndent-rendered");if(n!==-1){s=e[t];this.remove(s)}n=-1;i=[];s=undefined}},isMultiLine:function(e){var t=e.value.slice(e.selectionStart,e.selectionEnd),n=new RegExp(/\n/);if(n.test(t))return true;else return false},findStartIndices:function(e){var t=e.value,n=[],i=0;while(t.match(/\n/)&&t.match(/\n/).length>0){i=n.length>0?n[n.length-1]:0;var s=t.search("\n");n.push(s+i+1);t=t.substring(s+1)}n.unshift(0);return n}};