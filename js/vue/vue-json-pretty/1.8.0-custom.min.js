(function e(t,l){if(typeof exports==="object"&&typeof module==="object")module.exports=l();else if(typeof define==="function"&&define.amd)define([],l);else if(typeof exports==="object")exports["VueJsonPretty"]=l();else t["VueJsonPretty"]=l()})(this,(function(){return function(){"use strict";var e={16:function(e,t,l){l.r(t);l.d(t,{default:function(){return O}});var o={i8:"1.8.0"};var n=function(){var e=this;var t=e.$createElement;var l=e._self._c||t;return l("div",{ref:"tree",class:{"vjs-tree":true,"is-virtual":e.virtual},on:{scroll:e.onTreeScroll}},[l("div",{style:e.virtual&&{height:e.flatData.length*e.itemHeight+"px"}},[l("div",{style:e.virtual&&{transform:"translateY("+e.translateY+"px)"}},e._l(e.visibleData,(function(t){return l("tree-node",{key:t.id,attrs:{node:t,collapsed:!!e.hiddenPaths[t.path],"custom-value-formatter":e.customValueFormatter,"show-double-quotes":e.showDoubleQuotes,"show-length":e.showLength,"collapsed-on-click-brackets":e.collapsedOnClickBrackets,checked:e.selectedPaths.includes(t.path),"selectable-type":e.selectableType,"show-line":e.showLine,"show-select-controller":e.showSelectController,"select-on-click-node":e.selectOnClickNode,"path-selectable":e.pathSelectable,"highlight-selected-node":e.highlightSelectedNode},on:{"tree-node-click":e.onTreeNodeClick,"brackets-click":e.onBracketsClick,"selected-change":e.onSelectedChange}})})),1)])])};var s=[];var a=function(){var e=this;var t=e.$createElement;var l=e._self._c||t;return l("div",{class:{"vjs-tree__node":true,"has-selector":e.showSelectController,"is-highlight":e.highlightSelectedNode&&e.checked},on:{click:e.onTreeNodeClick}},[e.showSelectController&&e.selectable&&e.node.type!=="objectEnd"&&e.node.type!=="arrayEnd"?[l("check-controller",{attrs:{"is-multiple":e.isMultiple,checked:e.checked},on:{change:e.onCheckedChange}})]:e._e(),e._v(" "),e._l(e.node.level,(function(t,o){return l("div",{key:o,class:{"vjs-tree__indent":true,"has-line":e.showLine}})})),e._v(" "),e.node.key?l("span",{staticClass:"vjs-key"},[e._v(" "+e._s(e.prettyKey)+":Â  ")]):e._e(),e._v(" "),l("span",[e.node.type!=="content"?l("brackets",{attrs:{data:e.node.content,"collapsed-on-click-brackets":e.collapsedOnClickBrackets},on:{click:e.onBracketsClick}}):[e.customValueFormatter?l("span",{class:e.valueClass,domProps:{innerHTML:e._s(e.customFormatter(e.node.content))}}):l("span",{class:e.valueClass},[e._v(e._s(e.defaultFormatter(e.node.content)))])],e._v(" "),e.node.showComma?l("span",[e._v(",")]):e._e(),e._v(" "),e.showLength&&e.collapsed?l("span",{staticClass:"vjs-comment"},[e._v(" // "+e._s(e.node.length)+" items ")]):e._e()],2)],2)};var r=[];var i=function(){var e=this;var t=e.$createElement;var l=e._self._c||t;return l("span",{staticClass:"vjs-tree__brackets",on:{click:function(t){t.stopPropagation();return e.toggleBrackets(t)}}},[e._v("\n  "+e._s(e.data)+"\n")])};var c=[];var u={props:{data:{required:true,type:String},collapsedOnClickBrackets:Boolean},methods:{toggleBrackets(e){if(this.collapsedOnClickBrackets){this.$emit("click",e)}}}};var h=u;function d(e,t,l,o,n,s,a,r){var i=typeof e==="function"?e.options:e;if(t){i.render=t;i.staticRenderFns=l;i._compiled=true}if(o){i.functional=true}if(s){i._scopeId="data-v-"+s}var c;if(a){c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext;if(!e&&typeof __VUE_SSR_CONTEXT__!=="undefined"){e=__VUE_SSR_CONTEXT__}if(n){n.call(this,e)}if(e&&e._registeredComponents){e._registeredComponents.add(a)}};i._ssrRegister=c}else if(n){c=r?function(){n.call(this,(i.functional?this.parent:this).$root.$options.shadowRoot)}:n}if(c){if(i.functional){i._injectStyles=c;var u=i.render;i.render=function e(t,l){c.call(l);return u(t,l)}}else{var h=i.beforeCreate;i.beforeCreate=h?[].concat(h,c):[c]}}return{exports:e,options:i}}var p=d(h,i,c,false,null,null,null);var f=p.exports;var m=function(){var e=this;var t=e.$createElement;var l=e._self._c||t;return l("label",{class:["vjs-check-controller",e.checked?"is-checked":""],on:{click:function(e){e.stopPropagation()}}},[l("span",{class:"vjs-check-controller__inner is-"+e.uiType}),e._v(" "),e.uiType==="checkbox"?l("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],class:"vjs-check-controller__original is-"+e.uiType,attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.model)?e._i(e.model,null)>-1:e.model},on:{change:[function(t){var l=e.model,o=t.target,n=o.checked?true:false;if(Array.isArray(l)){var s=null,a=e._i(l,s);if(o.checked){a<0&&(e.model=l.concat([s]))}else{a>-1&&(e.model=l.slice(0,a).concat(l.slice(a+1)))}}else{e.model=n}},function(t){return e.$emit("change",e.model)}],focus:function(t){e.focus=true},blur:function(t){e.focus=false}}}):e.uiType==="radio"?l("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],class:"vjs-check-controller__original is-"+e.uiType,attrs:{type:"radio"},domProps:{checked:e._q(e.model,null)},on:{change:[function(t){e.model=null},function(t){return e.$emit("change",e.model)}],focus:function(t){e.focus=true},blur:function(t){e.focus=false}}}):l("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],class:"vjs-check-controller__original is-"+e.uiType,attrs:{type:e.uiType},domProps:{value:e.model},on:{change:function(t){return e.$emit("change",e.model)},focus:function(t){e.focus=true},blur:function(t){e.focus=false},input:function(t){if(t.target.composing){return}e.model=t.target.value}}})])};var v=[];var y={props:{checked:{type:Boolean,default:false},isMultiple:Boolean},data(){return{focus:false}},computed:{uiType(){return this.isMultiple?"checkbox":"radio"},model:{get(){return this.checked},set(e){this.$emit("input",e)}}}};var g=y;var k=d(g,m,v,false,null,null,null);var b=k.exports;function _(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function C(e,t="root",l=0,{key:o,index:n,type:s="content",showComma:a=false,length:r=1}={}){const i=_(e);if(i==="array"){const n=e.map(((e,o,n)=>C(e,`${t}[${o}]`,l+1,{index:o,showComma:o!==n.length-1,length:r,type:s}))).flat();return[C("[",t,l,{key:o,length:e.length,type:"arrayStart"})[0]].concat(n,C("]",t,l,{showComma:a,length:e.length,type:"arrayEnd"})[0])}else if(i==="object"){const i=Object.keys(e);const c=i.map(((o,n,a)=>C(e[o],o.includes(".")?`${t}["${o}"]`:`${t}.${o}`,l+1,{key:o,showComma:n!==a.length-1,length:r,type:s}))).flat();return[C("{",t,l,{key:o,index:n,length:i.length,type:"objectStart"})[0]].concat(c,C("}",t,l,{showComma:a,length:i.length,type:"objectEnd"})[0])}const c=Object.entries({content:e,level:l,key:o,index:n,path:t,showComma:a,length:r,type:s}).reduce(((e,[t,l])=>{if(l!==undefined){return{...e,[t]:l}}return e}),{});return _(c)==="object"?[c]:c}var S={components:{Brackets:f,CheckController:b},props:{node:{required:true,type:Object},collapsed:Boolean,collapsedOnClickBrackets:Boolean,showDoubleQuotes:Boolean,showLength:Boolean,checked:Boolean,selectableType:{type:String,default:""},showSelectController:{type:Boolean,default:false},showLine:{type:Boolean,default:true},selectOnClickNode:{type:Boolean,default:true},pathSelectable:{type:Function,default:()=>true},highlightSelectedNode:{type:Boolean,default:true},customValueFormatter:{type:Function,default:null}},computed:{valueClass(){return`vjs-value vjs-value__${this.dataType}`},dataType(){return _(this.node.content)},prettyKey(){return this.showDoubleQuotes?`"${this.node.key}"`:this.node.key},selectable(){return this.pathSelectable(this.node.path,this.node.content)&&(this.isMultiple||this.isSingle)},isMultiple(){return this.selectableType==="multiple"},isSingle(){return this.selectableType==="single"}},methods:{defaultFormatter(e){let t=e+"";if(this.dataType==="string")t=`"${t}"`;return t},customFormatter(e){return this.customValueFormatter?this.customValueFormatter(e,this.node.key,this.node.path,this.defaultFormatter(e)):this.defaultFormatter(e)},onBracketsClick(){this.$emit("brackets-click",!this.collapsed,this.node.path)},onCheckedChange(){this.$emit("selected-change",this.node)},onTreeNodeClick(){this.$emit("tree-node-click",this.node);if(this.selectable&&this.selectOnClickNode){this.$emit("selected-change",this.node)}}}};var w=S;var T=d(w,a,r,false,null,null,null);var j=T.exports;var $={name:"VueJsonPretty",components:{TreeNode:j},props:{data:{type:[String,Number,Boolean,Array,Object],default:null},deep:{type:Number,default:Infinity},path:{type:String,default:"root"},virtual:{type:Boolean,default:false},itemHeight:{type:Number,default:20},showLength:{type:Boolean,default:false},showDoubleQuotes:{type:Boolean,default:true},selectableType:{type:String,default:""},showSelectController:{type:Boolean,default:false},showLine:{type:Boolean,default:true},selectOnClickNode:{type:Boolean,default:true},value:{type:[Array,String],default:()=>""},pathSelectable:{type:Function,default:()=>true},highlightSelectedNode:{type:Boolean,default:true},collapsedOnClickBrackets:{type:Boolean,default:true},customValueFormatter:{type:Function,default:null}},data(){return{translateY:0,visibleData:null,hiddenPaths:C(this.data,this.path).reduce(((e,t)=>{if((t.type==="objectStart"||t.type==="arrayStart")&&t.level===this.deep){return{...e,[t.path]:1}}return e}),{})}},computed:{flatData(){let e=null;const t=C(this.data,this.path).reduce(((t,l,o)=>{const n={...l,id:o};const s=this.hiddenPaths[n.path];if(e&&e.path===n.path){const l=e.type==="objectStart";const o={...e,...n,content:l?"{...}":"[...]",type:l?"objectCollapsed":"arrayCollapsed"};e=null;return t.concat(o)}else if(s&&!e){e=n;return t}return e?t:t.concat(n)}),[]);return t},selectedPaths:{get(){if(this.value&&this.selectableType==="single"){return[this.value]}return this.value||[]},set(e){this.$emit("input",e)}},propsError(){const e=this.selectableType&&!this.selectOnClickNode&&!this.showSelectController;return e?"When selectableType is not null, selectOnClickNode and showSelectController cannot be false at the same time, because this will cause the selection to fail.":""}},watch:{propsError:{handler(e){if(e){throw new Error(`[VueJsonPretty] ${e}`)}},immediate:true},flatData:{handler(){this.onTreeScroll()},immediate:true}},methods:{onTreeScroll(){if(this.virtual){const e=10;const t=this.$refs.tree&&this.$refs.tree.scrollTop||0;const l=Math.floor(t/this.itemHeight);let o=l<0?0:l+e>this.flatData.length?this.flatData.length-e:l;if(o<0){o=0}const n=o+e;this.translateY=o*this.itemHeight;this.visibleData=this.flatData.filter(((e,t)=>t>=o&&t<n))}else{this.visibleData=this.flatData}},onSelectedChange({path:e}){const t=this.selectableType;if(t==="multiple"){const t=this.selectedPaths.findIndex((t=>t===e));const l=[...this.selectedPaths];if(t!==-1){this.selectedPaths.splice(t,1)}else{this.selectedPaths.push(e)}this.$emit("change",this.selectedPaths,l)}else if(t==="single"){if(this.selectedPaths!==e){const t=this.selectedPaths;const l=e;this.selectedPaths=l;this.$emit("change",l,t)}}},onTreeNodeClick({content:e,path:t}){this.$emit("click",t,e)},onBracketsClick(e,t){if(e){this.hiddenPaths={...this.hiddenPaths,[t]:1}}else{const e={...this.hiddenPaths};delete e[t];this.hiddenPaths=e}}}};var B=$;var P=d(B,n,s,false,null,null,null);var x=P.exports;var O=Object.assign({},x,{version:o.i8})}};var t={};function l(o){if(t[o]){return t[o].exports}var n=t[o]={exports:{}};e[o](n,n.exports,l);return n.exports}!function(){l.d=function(e,t){for(var o in t){if(l.o(t,o)&&!l.o(e,o)){Object.defineProperty(e,o,{enumerable:true,get:t[o]})}}}}();!function(){l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}();!function(){l.r=function(e){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})}}();return l(16)}()}));