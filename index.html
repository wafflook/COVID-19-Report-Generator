<!doctype html>
 <html>
  <head>

    <title>無題</title>

    <meta charset='utf-8'>
    <meta content='Yusuke Sano' name='author'>
    <meta content='新型コロナウイルス感染症 発生届' name='description'>
    <meta content='telephone=no,address=no,email=no,date=no,url=no' name='format-detection'>
    <meta content='noimageindex,notranslate,nosnippet,noarchive,nofollow,noindex' name='robots'>
    <meta content='width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no' name='viewport'>

    <link href='js/jquery/Fomantic-UI/2.8.8-custom.css' rel='stylesheet'>
    <link href='asset/manifest.json' rel='manifest'>
    <link href='asset/favicon.ico' rel='icon'>

    <style>
      html,
      body{
        -webkit-text-stroke:.3px;
        font:12px 'M+2VM+IPAG circle Regular';
      }
      html,
      body,
      main,
      main .ui.grid,
      main .ui.grid > .row,
      main .ui.grid > .row > .column{
        height:100vh;
      }
      main{
        margin:0 auto;
        width:fit-content;
      }
   </style>
    <style>
      .ui.grid > .row > .column{
        height:100vh;
        overflow-y:scroll;
      }
      .ui.grid > .row > .column::-webkit-scrollbar{
        display:none;
      }
      .ui.grid > .row > .column:nth-child(1){
        width:380px;
      }
      .ui.grid > .row > .column:nth-child(2){
        width:192mm;
        padding:0;
      }
   </style>
    <style>
      .ui.header{
        font-family:'851手書き雑フォント';
      }
      .ui.divider{
        font-weight:normal;
      }
      .ui.segment{
        margin:6px;
      }
   </style>
    <style>
      iframe.pdf{
        border:none;
        width:100%;
        display:block;
        height:100%;
      }
   </style>
    <style>
     /*
      * FontAwesome v6.0.0
      */
      i.icon.pen.marker:before {
        content:"\f5a1";
      }
      i.icon.virus.covid:before {
        content:"\e4a8";
      }
   </style>
    <style>
      i.icon{
        pointer-events:none;
      }
   </style>
 </head>
  <body>
    <main>
      <div class='ui grid internally celled'>
        <div class='row'>
          <div class='column'>
            <div class='ui segments'>
              <div class='ui segment block'>
                <div class='content fitted'>
                  <div class='ui card fluid basic'>
                    <div class='content'>
                      <img class='ui image floated left mini' src='asset/favicon.ico'>
                      <div class='header'>
                        COVID-19 Report Generator
                     </div>
                      <div class='meta'>
                        <a href='https://www.mhlw.go.jp/bunya/kenkou/kekkaku-kansenshou11/01-shitei-01.html'>発生届</a>：2021/11/29 18:03:58（版）
                     </div>
                      <div class='description'>
                        <p>発生届をＰＣから入力可能にしました。問題があれば<a href='http://twitter.com/wafflook' target='_blank'>連絡</a>下さい</p>
                     </div>
                   </div>
                 </div>
                  <a class='ui label corner' @click='save'>
                    <i class='icon download '></i>
                 </a>
               </div>
             </div>
              <div class='ui segment block'>
                <div class='content fitted'>
                  <div class='ui menu basic pointing icon' ref='menu'>
                    <a class='item' data-tab='a' v-micron:m1="'jerk'">
                      <i class='icon pen marker' id='m1'></i>
                   </a>
                    <a class='item' data-tab='b' v-micron:m2="'bounce'">
                      <div class='ui label floating top icon blue'>
                        <i class='icon user' id='m2'></i>
                     </div>
                      01
                   </a>
                    <a class='item' data-tab='c' v-micron:m3="'bounce'">
                      <div class='ui label floating top icon blue'>
                        <i class='icon virus covid' id='m3'></i>
                     </div>
                      11
                   </a>
                    <a class='item' data-tab='d' v-micron:m4="'bounce'">
                      <div class='ui label floating top icon blue'>
                        <i class='icon vial' id='m4'></i>
                     </div>
                      12
                   </a>
                    <a class='item' data-tab='e' v-micron:m6="'bounce'">
                      <div class='ui label floating top icon blue'>
                        <i class='icon calendar week' id='m6'></i>
                     </div>
                      13
                   </a>
                    <a class='item' data-tab='f' v-micron:m7="'bounce'">
                      <div class='ui label floating top icon blue'>
                        <i class='icon syringe' id='m7'></i>
                     </div>
                      18
                   </a>
                    <a class='item' data-tab='g' v-micron:m8="'bounce'">
                      <div class='ui label floating top icon blue'>
                        <i class='icon stethoscope' id='m8'></i>
                     </div>
                      19
                   </a>
                    <a class='item' data-tab='h' v-micron:m9="'jerk'">
                      <i class='icon note sticky' id='m9'></i>
                   </a>
                    <a class='item right' data-tab='i' v-micron:m10="'jerk'">
                      <i class='icon setting' id='m10'></i>
                   </a>
                    <a class='item' data-tab='z' v-micron:m11="'jerk'">
                      <i class='icon terminal' id='m11'></i>
                   </a>
                  <a class='item' @click='app.fullscreen = !app.fullscreen' v-micron:m12="'pop'">
                    <i class='icon expand' id='m12'></i>
                  </a>
                 </div>
               </div>
             </div>
           </div>
            <div class='ui tab' data-tab='a'>
              <div v-enter-to-next-input>
                <div>
                  <div class='ui divider horizontal'>
                    報告日
                 </div>
                  <div class='ui segment fitted'>
                    <dat-gui expand>
                      <dat-value v-model='param.報告年月日' label='報告年月日' title='報告年月日' type='yymmdd'></dat-value>
                   </dat-gui>
                 </div>
               </div>
                <div>
                  <div class='ui divider horizontal'>
                    報告者
                 </div>
                  <div class='ui segment fitted'>
                    <dat-gui expand>
                      <dat-value v-model='param.医師の氏名' label='医師の氏名' title='医師の氏名'></dat-value>
                      <dat-value v-model='param.医師の従事病院または診療所の名称' label='医師の従事病院または診療所の名称' title='医師の従事病院または診療所の名称'></dat-value>
                      <dat-value v-model='param.医師の従事病院または診療所の所在地' label='医師の従事病院または診療所の所在地' title='医師の従事病院または診療所の所在地'></dat-value>
                      <dat-value v-model='param.医師の従事病院または診療所の電話番号'label='医師の従事病院または診療所の電話番号' title='医師の従事病院または診療所の電話番号' type='phone'></dat-value>
                   </dat-gui>
                 </div>
               </div>
             </div>
           </div>
            <div class='ui tab' data-tab='b'>
              <div no='1' v-enter-to-next-input>
                <div class='ui divider horizontal'>
                  当該者
               </div>
                <div class='ui segment fitted'>
                  <dat-gui expand>
                    <dat-value v-model='param.当該者の類型' label='当該者の類型' :values="['患者（確定例）','無患者の症状病原体保有者','疑似症患者（*）','感染症死亡者の死体','感染症死亡疑い者の死体']"></dat-value>
                    <dat-value v-model='param.当該者の氏名' label='当該者の氏名' title='当該者の氏名'></dat-value>
                    <dat-value v-model='param.当該者の性別' label='当該者の性別' :values="['男','女']"></dat-value>
                    <dat-value v-model='param.当該者の生年月日' label='当該者の生年月日' title='当該者の生年月日' type='yyyymmdd'></dat-value>
                    <dat-value v-model='param.当該者の年齢' label='当該者の年齢' :min='0' :max='125' :step='1' :empty='0'></dat-value>
                    <dat-value v-model='param.当該者の職業' label='当該者の職業' title='当該者の職業'></dat-value>
                    <dat-value v-model='param.当該者の住所' label='当該者の住所' title='当該者の住所'></dat-value>
                    <dat-value v-model='param.当該者の住所の電話番号' label='当該者の住所の電話番号' title='当該者の住所の電話番号' type='phone'></dat-value>
                    <dat-value v-model='param.当該者の所在地' label='当該者の所在地' title='当該者の所在地'></dat-value>
                    <dat-value v-model='param.当該者の所在地の電話番号' label='当該者の所在地の電話番号' title='当該者の所在地の電話番号' type='phone'></dat-value>
                 </dat-gui>
               </div>
                <div v-if='param.当該者の年齢 < 20'>
                  <div class='ui divider horizontal'>
                    保護者
                 </div>
                  <div class='ui segment fitted'>
                    <dat-gui expand>
                      <dat-value v-model='param.保護者の氏名' label='保護者の氏名' title='保護者の氏名'></dat-value>
                      <dat-value v-model='param.保護者の住所' label='保護者の住所' title='保護者の住所'></dat-value>
                      <dat-value v-model='param.保護者の電話番号' label='保護者の電話番号' title='保護者の電話番号' type='phone'></dat-value>
                  </dat-gui>
                </div>
               </div>
             </div>
           </div>
            <div class='ui tab' data-tab='c'>
              <div no='11' v-enter-to-next-input>
                <div class='ui divider horizontal'>
                  症状
               </div>
                <div class='ui segment fitted'>
                  <dat-gui expand>
                    <dat-value v-model='param.患者の症状.発熱' label='発熱'></dat-value>
                    <dat-value v-model='param.患者の症状.咳' label='咳'></dat-value>
                    <dat-value v-model='param.患者の症状.咳以外の急性呼吸器の症状' label='咳以外の急性呼吸器の症状'></dat-value>
                    <dat-value v-model='param.患者の症状.肺炎像' label='肺炎像'></dat-value>
                    <dat-value v-model='param.患者の症状.重篤な肺炎' label='重篤な肺炎'></dat-value>
                    <dat-value v-model='param.患者の症状.急性呼吸窮迫症候群' label='急性呼吸窮迫症候群'></dat-value>
                    <dat-value v-model='param.患者の症状.多臓器不全' label='多臓器不全'></dat-value>
                    <dat-value v-model='param.患者の症状.全身倦怠感' label='全身倦怠感'></dat-value>
                    <dat-value v-model='param.患者の症状.頭痛' label='頭痛'></dat-value>
                    <dat-value v-model="param.患者の症状['嘔気/嘔吐']" label='嘔気/嘔吐'></dat-value>
                    <dat-value v-model='param.患者の症状.下痢' label='下痢'></dat-value>
                    <dat-value v-model='param.患者の症状.結膜炎' label='結膜炎'></dat-value>
                    <dat-value v-model="param.患者の症状['嗅覚・味覚障害']" label='嗅覚・味覚障害'></dat-value>
                    <dat-value v-model="param['患者の酸素飽和度（室内気）']" label='酸素飽和度:ROOM' :min='1' :max='100' :step='1'></dat-value>
                    <dat-value v-model='param.患者の症状のその他' label='患者の症状のその他' title='患者の症状のその他'></dat-value>
                    <dat-value v-model='param.患者の症状.なし' label='症状なし'></dat-value>
                 </dat-gui>
               </div>
             </div>
           </div>
            <div class='ui tab' data-tab='d'>
              <div no='12' v-enter-to-next-input>
                <div class='ui divider horizontal'>
                  診断方法
               </div>
                <div class='ui segment fitted'>
                  <dat-gui expand>
                    <dat-value v-model='param.検出の種類' label='検出の種類' :values="['分離・同定による病原体の検出','検体から核酸増減法（ＰＣＲ法・ＬＡＭＰ法など）','抗原定性検査による病原体の抗原の検出','抗原定量検査による病原体の抗原の検出']"></dat-value>
                 </dat-gui>
               </div>
                <div class='ui divider horizontal'>
                  {{param.検出の種類}}
               </div>
                <div class='ui segment fitted blue'>
                  <div v-switch='param.検出の種類'>
                    <div v-case="'分離・同定による病原体の検出'">
                      <dat-gui>
                        <dat-value v-model='param.検出の検体の採取日' label='検出の検体の採取日' type='mmdd'></dat-value>
                        <dat-value v-model='param.検出の検体' label='検出の検体' :values="['喀痰','気管吸引液','肺胞洗浄液','咽頭拭い液','鼻腔吸引液','鼻腔拭い液','鼻咽頭拭い液','便','唾液','剖検材料']"></dat-value>
                        <dat-value v-model='param.検出の検体のその他' label='検出の検体のその他'></dat-value>
                     </dat-gui>
                   </div>
                    <div v-case="'検体から核酸増減法（ＰＣＲ法・ＬＡＭＰ法など）'">
                      <dat-gui>
                        <dat-value v-model='param.検出の検体の採取日' label='検出の検体の採取日' title='検出の検体の採取日' type='mmdd'></dat-value>
                        <dat-value v-model='param.検出の検体' label='検出の検体' :values="['喀痰','気管吸引液','肺胞洗浄液','咽頭拭い液','鼻腔吸引液','鼻腔拭い液','鼻咽頭拭い液','便','唾液','剖検材料']"></dat-value>
                        <dat-value v-model='param.検出の検体のその他' label='検出の検体のその他'></dat-value>
                     </dat-gui>
                   </div>
                    <div v-case="'・抗原定性検査による病原体の抗原の検出'">
                      <dat-gui>
                       <dat-value v-model='param.検出の検体の採取日' label='検出の検体の採取日' type='mmdd'></dat-value>
                        <dat-value v-model='param.検出の検体' label='検出の検体' :values="['鼻腔拭い液','鼻咽頭拭い液']"></dat-value>
                        <dat-value v-model='param.検出の検体のその他' label='検出の検体のその他'></dat-value>
                     </dat-gui>
                   </div>
                    <div v-case="'抗原定量検査による病原体の抗原の検出'">
                      <dat-gui>
                        <dat-value v-model='param.検出の検体の採取日' label='検出の検体の採取日' type='mmdd'></dat-value>
                        <dat-value v-model='param.検出の検体' label='検出の検体' :values="['鼻腔拭い液','鼻咽頭拭い液','唾液']"></dat-value>
                        <dat-value v-model='param.検出の検体のその他' label='検出の検体のその他'></dat-value>
                     </dat-gui>
                   </div>
                 </div>
               </div>
             </div>
           </div>
            <div class='ui tab' data-tab='e'>
              <div no='13' v-enter-to-next-input>
                <div class='ui divider horizontal'>
                  年月日
               </div>
                <div class='ui segment fitted'>
                 <dat-gui expand>
                    <dat-value v-model='param.初診年月日' label='初診年月日' title='初診年月日' type='yymmdd'></dat-value>
                    <dat-value v-model="param['初診（検案（※））年月日']" label='初診（検案（※））年月日' title='初診（検案（※））年月日' type='yymmdd'></dat-value>
                    <dat-value v-model='param.感染したと推定される年月日' label='感染したと推定される年月日' title='感染したと推定される年月日' type='yymmdd'></dat-value>
                    <dat-value v-model='param.発病年月日' label='発病年月日' title='発病年月日' type='yymmdd'></dat-value>
                    <dat-value v-model='param.死亡年月日' label='死亡年月日' title='死亡年月日' type='yymmdd'></dat-value>
                 </dat-gui>
               </div>
             </div>
           </div>
            <div class='ui tab' data-tab='f'>
              <div no='18' v-enter-to-next-input>
                <div class='ui divider horizontal'>
                 感染原因・感染経路
               </div>
                <div class='ui segment fitted'>
                  <dat-gui expand>
                    <dat-value v-model='param.感染の経路と原因' label='検出の種類' :values="['不明','確定','推定']"></dat-value>
                    <dat-value v-model='param.感染の経路は飛沫か飛沫核' label='感染源の種類'></dat-value>
                    <dat-value v-model='param.感染の経路は接触' label='接触した人・物の種類'></dat-value>
                    <dat-value v-model='param.感染の経路はその他' label='その他'></dat-value>
                 </dat-gui>
               </div>
                <div class='ui divider horizontal'>
                  感染地域
               </div>
                <div class='ui segment fitted'>
                  <dat-gui expand>
                    <dat-value v-model='param.感染の地域' label='感染地域' :values="['不明','確定','推定']"></dat-value>
                    <dat-value v-model='param.感染が国内の都道府県名' label='都道府県名'></dat-value>
                    <dat-value v-model='param.感染が国内の都道府県' label='都道府県' :values="['都','道','府','県']"></dat-value>
                    <dat-value v-model='param.感染が国内の市区町村名' label='市区町村名'></dat-value>
                    <dat-value v-model='param.感染が国内の市区町村' label='市区町村' :values="['市','区','町','村']"></dat-value>
                    <dat-value v-model='param.感染が国外' label='感染した国' :values="['','アイスランド','アイルランド','アゼルバイジャン','アフガニスタン','アブハジア','アメリカ','アラブ首長国連邦','アルジェリア','アルゼンチン','アルバニア','アルメニア','アンゴラ','アンティグア・バーブーダ','アンドラ','イエメン','イギリス','イスラエル','イタリア','イラク','イラン','インド','インドネシア','ウガンダ','ウクライナ','ウズベキスタン','ウルグアイ','エクアドル','エジプト','エストニア','エスワティニ（スワジランド）','エチオピア','エリトリア','エルサルバドル','沿ドニエストル','オーストラリア','オーストリア','オマーン','オランダ','ガーナ','カーボベルデ','ガイアナ','カザフスタン','カタール','カナダ','ガボン','カメルーン','韓国','ガンビア','カンボジア','北キプロス','北朝鮮','ギニア','ギニアビサウ','キプロス','キューバ','ギリシャ','キリバス','キルギス','グアテマラ','クウェート','クック諸島','グレナダ','クロアチア','ケニア','コートジボワール','コスタリカ','コソボ','コモロ','コロンビア','コンゴ共和国','コンゴ民主共和国','サウジアラビア','サモア','サントメ・プリンシペ','ザンビア','サンマリノ','シエラレオネ','ジブチ','ジャマイカ','ジョージア','シリア','シンガポール','ジンバブエ','スイス','スウェーデン','スーダン','スペイン','スリナム','スリランカ','スロバキア','スロベニア','セーシェル','赤道ギニア','セネガル','セルビア','セントクリストファー・ネイビス','セントビンセントおよびグレナディーン諸島','セントルシア','ソマリア','ソマリランド','ソロモン諸島','タイ','台湾','タジキスタン','タンザニア','チェコ','チャド','中央アフリカ共和国','中国','チュニジア','チリ','ツバル','デンマーク','ドイツ','トーゴ','ドミニカ共和国','ドミニカ国','トリニダード・トバゴ','トルクメニスタン','トルコ','トンガ','ナイジェリア','ナウル','ナゴルノ・カラバフ','ナミビア','ニウエ','ニカラグア','ニジェール','西サハラ','日本','ニュージーランド','ネパール','ノルウェー','バーレーン','ハイチ','パキスタン','バチカン','パナマ','バヌアツ','バハマ','パプアニューギニア','パラオ','パラグアイ','バルバドス','パレスチナ','ハンガリー','バングラデシュ','東ティモール','フィジー','フィリピン','フィンランド','ブータン','ブラジル','フランス','ブルガリア','ブルキナファソ','ブルネイ','ブルンジ','ベトナム','ベナン','ベネズエラ','ベラルーシ','ベリーズ','ペルー','ベルギー','ポーランド','ボスニア・ヘルツェゴビナ','ボツワナ','ボリビア','ポルトガル','ホンジュラス','マケドニア旧ユーゴスラビア共和国','マーシャル諸島','マダガスカル','マラウイ','マリ','マルタ','マレーシア','ミクロネシア連邦','南アフリカ','南オセチア','南スーダン','ミャンマー','メキシコ','モーリシャス','モーリタニア','モザンビーク','モナコ','モルディブ','モルドバ','モロッコ','モンゴル','モンテネグロ','ヨルダン','ラオス','ラトビア','リトアニア','リビア','リヒテンシュタイン','リベリア','ルーマニア','ルクセンブルク','ルワンダ','レソト','レバノン','ロシア']"></dat-value>
                    <dat-value v-model='param.感染が国外への出国日' label='入国日' type='yymmdd'></dat-value>
                    <dat-value v-model='param.感染が国外での帰国日' label='出国日' type='yymmdd'></dat-value>
                 </dat-gui>
               </div>
                <div class='ui divider horizontal'>
                  １回目のワクチン接種
               </div>
                <div class='ui segment fitted'>
                  <dat-gui expand>
                    <dat-value v-model='param.コロナのワクチン１回目の年齢' label='２回目の年齢' :min='0' :max='125' :step='1' :empty='0'></dat-value>
                    <dat-value v-model='param.コロナのワクチン１回目の接種年月日' label='１回目の接種年月日' type='yymmdd'></dat-value>
                    <dat-value v-model='param.コロナのワクチン１回目の種類' label='１回目ワクチンの種類'></dat-value>
                    <dat-value v-model='param.コロナのワクチン１回目の製造会社' label='１回目ワクチンの製造会社'></dat-value>
                 </dat-gui>
               </div>
                <div class='ui divider horizontal'>
                  ２回目のワクチン接種
               </div>
                <div class='ui segment fitted'>
                  <dat-gui expand>
                    <dat-value v-model='param.コロナのワクチン２回目の年齢'label='２回目の年齢' :min='0' :max='125' :step='1' :empty='0'></dat-value>
                    <dat-value v-model='param.コロナのワクチン２回目の種類' label='２回目ワクチンの種類'></dat-value>
                    <dat-value v-model='param.コロナのワクチン２回目の製造会社' label='２回目ワクチンの製造会社'></dat-value>
                    <dat-value v-model='param.コロナのワクチン３回目の接種年月日' label='２回目の接種年月日'  type='yymmdd'></dat-value>
                 </dat-gui>
               </div>
                <div class='ui divider horizontal'>
                  ３回目のワクチン接種
               </div>
                <div class='ui segment fitted'>
                  <dat-gui expand>
                    <dat-value v-model='param.コロナのワクチン３回目の年齢' label='３回目の年齢' :min='0' :max='125' :step='1' :empty='0'></dat-value>
                    <dat-value v-model='param.コロナのワクチン３回目の種類' label='３回目のワクチンの種類'></dat-value>
                    <dat-value v-model='param.コロナのワクチン２回目の製造会社' label='３回目のワクチンの製造会社'></dat-value>
                    <dat-value v-model='param.コロナのワクチン３回目の接種年月日' label='３回目の接種年月日'  type='yymmdd'></dat-value>
                 </dat-gui>
               </div>
             </div>
           </div>
            <div class='ui tab' data-tab='g'>
              <div no='19' v-enter-to-next-input>
                <div class='ui divider horizontal'>
                  蔓延防止の為に必要な事項
               </div>
               <div class='ui segment fitted'>
                  <dat-gui expand>
                    <dat-value v-model='param.届出時点の入院有無' label='届出時点の入院有無' title='届出時点の入院有無'></dat-value>
                    <dat-value v-model='param.入院年月日' label='入院年月日' title='入院年月日' type='yymmdd'></dat-value>
                 </dat-gui>
               </div>
                <div class='ui divider horizontal'>
                  重症化のリスク因子
               </div>
                <div class='ui segment fitted'>
                  <dat-gui expand>
                    <dat-value v-model='param.重症化のリスク因子.悪性腫瘍' label='悪性腫瘍'></dat-value>
                    <dat-value v-model="param.重症化のリスク因子['慢性閉塞性肺疾患（COPD）']" label='慢性閉塞性肺疾患'></dat-value>
                    <dat-value v-model='param.重症化のリスク因子.慢性腎臓病' label='慢性腎臓病'></dat-value>
                    <dat-value v-model='param.重症化のリスク因子.高血圧' label='高血圧'></dat-value>
                    <dat-value v-model='param.重症化のリスク因子.糖尿病' label='糖尿病'></dat-value>
                    <dat-value v-model='param.重症化のリスク因子.脂質異常症' label='脂質異常症'></dat-value>
                    <dat-value v-model="param.重症化のリスク因子['肥満（BMI30 以上）']"  label='肥満（BMI30 以上）'></dat-value>
                    <dat-value v-model='param.重症化のリスク因子.喫煙歴' label='喫煙歴'></dat-value>
                    <dat-value v-model='param.重症化のリスク因子のその他' label='重症化のリスク因子のその他'></dat-value>
                    <dat-value v-model='param.免疫の機能の低下有無' label='免疫の機能の低下有無'></dat-value>
                    <dat-value v-model='param.妊娠の有無'label='妊娠の有無'></dat-value>
                    <dat-value v-model='param.重症度' label='検出の種類' :values="['軽症','中等症Ⅰ','中等症Ⅱ','重症']"></dat-value>
                    <dat-value v-model='param.入院の必要性の有無' label='入院の必要性の有無'></dat-value>
                    <dat-value v-model='param.特例の診療の有無' label='特例の診療の有無'></dat-value>
                 </dat-gui>
               </div>
             </div>
           </div>
            <div class='ui tab' data-tab='h'>
              <div class='ui divider horizontal'>
                メモ
             </div>
              <div class='ui segment fitted'>
                <dat-gui expand>
                  <dat-text v-model='param.メモ' label='メモ'></dat-text>
               </dat-gui>
             </div>
           </div>
            <div class='ui tab' data-tab='i'>
              <div class='ui segments'>
                <div class='ui segment block'>
                  <div class='content fitted'>
                    <dat-gui>
                      <dat-folder name='ＰＤＦ' open>
                        <dat-value v-model='app.wait' label='間引間隔（入力の反映）' :values="{'０.５秒間入力がなければ反映':500,'１.０秒間入力がなければ反映':1000,'１.５秒間入力がなければ反映':1500}"></dat-value>
                     </dat-folder>
                      <dat-folder name='ＦＯＮＴ' open>
                        <dat-color v-model='color.mark' label='マーカー色'></dat-color>
                        <dat-color v-model='color.font' label='文字色'></dat-color>
                     </dat-folder>
                      <dat-value label='入力をすべてクリア' @click='clear'></dat-value>
                   </dat-gui>
                 </div>
               </div>
             </div>
           </div>
            <div class='ui tab' data-tab='z'>
              <div class='ui divider horizontal'>
                ＰＤＦのプロパティ
             </div>
              <div class='ui segment fitted'>
                <dat-gui>
                  <dat-value v-model='attribute.Language' label='言語' readonly></dat-value>
                  <dat-value v-model='attribute.Title' label='タイトル' readonly></dat-value>
                  <dat-value v-model='attribute.Author' label='作成者' readonly></dat-value>
                  <dat-value v-model='attribute.Subject' label='サブタイトル' readonly></dat-value>
                  <dat-value v-model="attribute.Keywords.join(',')" label='キーワード' readonly></dat-value>
                  <dat-value :value="attribute.CreationDate | moment('YYYY/MM/DD HH:mm:ss')" label='作成日' readonly></dat-value>
                  <dat-value :value="attribute.ModificationDate | moment('YYYY/MM/DD HH:mm:ss')" label='更新日' readonly></dat-value>
               </dat-gui>
             </div>
              <div class='ui divider horizontal'>
                文書の内容
             </div>
              <div class='ui segment fitted'>
                <properties v-model='param'> '>
               </properties>
             </div>
              <div class='ui divider horizontal'>
                文書の内容
             </div>
              <div class='ui segment fitted'>
                <vue-json-pretty
                  :data='param'
                  :show-line='true'
                  :show-length='true'
                  :show-double-quotes='true'
                  :highlight-selected-node='true'
                  :highlight-mouseover-node='true'>
               </vue-json-pretty>
             </div>
           </div>
         </div>
          <div class='column'>            
            <iframe class='pdf' ref='iframe'>
          </iframe>
         </div>
       </div>
     </div>
   </main>
 </body>
</html>

 <!-- JS -->
 <script src='js/lodash/5.0.0.js'></script>
 <script src='js/micron/1.1.6.js'></script>
 <script src='js/fontkit/1.1.0.js'></script>
 <script src='js/moment/2.29.1.js'></script>
 <script src='js/pdf-lib/1.16.0.js'></script>
 <script src='js/cleave.js/1.6.0.js'></script>
 <script src='js/moment-age/1.0.0.js'></script>
 <script src='js/moment/locale/ja.js'></script>
 <script src='js/localForage/1.9.0.js'></script>
 <script src='js/FileSaver.js/2.0.5.js'></script>
 <script src='js/screenfull.js/5.1.0.js'></script>
 <script src='js/dat.gui/0.7.7-custom.js'></script>
 <script src='js/flattie/1.1.0-custom.js'></script>
 <script src='js/TinyColor/1.4.2-custom.js'></script>
 <!-- JQUERY -->
 <script src='js/jquery/4.0.0.js'></script>
 <script src='js/jquery/Fomantic-UI/2.8.8-custom.js'></script>
 <!-- VUE -->
 <script src='js/vue/2.6.14-custom.js'></script>
 <script src='js/vue/vue-moment/4.1.0-custom.js'></script>
 <script src='js/vue/vue-dat-gui/0.0.1-custom.js'></script>
 <script src='js/vue/v-switch-case/1.0.3-custom.js'></script>
 <script src='js/vue/vue-json-pretty/1.8.0-custom.js'></script>
 <script src='js/vue/http-vue-loader/1.4.2-custom.js'></script>

 <script>
   Vue.use(VueDatGui)
   Vue.use(VueSwitch)
   Vue.use(VueMoment)
   Vue.use(VueLoader)
</script>
 <script>
   Vue.component('vue-json-pretty', VueJsonPretty.default)
</script>
 <script>
   Vue.mixin({
     methods:{
       toast:function(type,message){
         $(document.body).toast({
           className      : {
             container    : 'ui toast-container block',
             box          : 'toast-box floating',
           },
           newestOnTop:true,
           displayTime:0,
           message:message,
           class:type
         })
       },
       toast_confirm:function(type,message,fnc_yes,fnc_no){
         $(document.body).toast({
           className      : {
             container    : 'ui toast-container block',
             box          : 'toast-box floating',
           },
           newestOnTop:true,
           classActions:'attached top',
           message:message,
           displayTime:0,
           class:type,
           actions:[{
             text:'はい',
             class:'green',
             click:fnc_yes
           },{
            text:'いいえ',
             class:'red',
            click:fnc_no
          }]
        })
       }
     },
     mounted:function(){
       var name = this.$options.name || this.$options._componentTag
       if(name){
         this.$el.classList.add(name)
       }
     }
   })
</script>
 <script>
   Vue.directive('micron',{
     inserted:function(el,binding,vnode){
       vnode.context.$nextTick(function(){
         var id = binding.arg

         $(el).attr(id ? {
           'data-micron':binding.value,
           'data-micron-bind':true,
           'data-micron-id':id
         } : {
           'data-micron':binding.arg
         })
       })
     }
   })
   Vue.directive('enter-to-next-input',function(el,binding,vnode){
     var input
     var event = ['focus','keydown','focusout']
     var namespace = binding.arg
     vnode.context.$nextTick(function(){
       var self = this
       input = $([
         'button',
         'select',
         'textarea',
         'input[type=text]',
         'input[type=checkbox]',
         'input[type=password]'
       ].join(','),el)
       callback = {
         focus:function(){
           $(el).closest('.cr').addClass('focus')
         },
         focusout:function(){
           $(el).closest('.cr').removeClass('focus')
         },
         keydown:function(event){
           if(event.keyCode == 13){
             var i = input.index(this)
             var n = (i+1) % input.length
             self.$nextTick(function(){
               input.eq(n).focus()
             })
             switch(input.eq(n).prop('localName')){
               case 'textarea':
               case 'input':
                 return false;
             }
           }
         }
       }
       _.map(callback,function(func,event){
         event = event + '.' + namespace
         input.off(event)
         input.on(event,func)
       })
     })
   })
</script>

 <script>
   new Vue({
     el:'main',
     components:{
       'properties':'url:vue/properties.vue'
     },
     data:{
       app:{
         wait:1000,
         fullscreen:false
       },
       doc:null,
       pdf:null,
       font:null,
       location:{
         pdf:'medical-survey.pdf',
         font:'ttf/M+2VM+IPAG circle Regular/1.011.ttf'
       },
       color:{
         mark:'#ffff00',
         font:'#ff1493'
       },
       timestamp:0,
       param:{
         報告年月日 :'03/08/27',
         // 00.報告者
         医師の氏名:'山田 茉',
         医師の従事病院または診療所の名称 :'山田医療東部センター',
         医師の従事病院または診療所の所在地:'秋田県北秋田郡上小阿仁村大字沖田面字小蒲野',
         医師の従事病院または診療所の電話番号:'827-128-9800',
         // 01.当該者
         当該者の類型:'患者（確定例）',
         当該者の氏名:'山田 塩（ヤマダ シオ）',
         当該者の性別:'男',
         当該者の生年月日:'1991/11/07',
         当該者の年齢:30,
         当該者の職業:'医療関係者',
         当該者の住所:'愛知県海部郡飛島村大字飛島新田字竹之郷ヨタレ南ノ割',
         当該者の住所の電話番号:'827-128-9800',
         当該者の所在地:'東京都千代田区千代田１-１（実家）',
         当該者の所在地の電話番号:'827-128-9800',
         // 09.保護者
         保護者の氏名:'霞が関',
         保護者の住所:'東京都千代田区霞が関三丁目２番５号',
         保護者の電話番号:'827-128-9800',
         // 11.症状
         患者の症状:{
           発熱:true,
           咳:false,
           咳以外の急性呼吸器の症状:false,
           肺炎像:false,
           重篤な肺炎:false,
           急性呼吸窮迫症候群:false,
           多臓器不全:false,
           全身倦怠感:true,
           頭痛:false,
           '嘔気/嘔吐':true,
           下痢:false,
           結膜炎:false,
           '嗅覚・味覚障害':false,
           なし:false,
         },
         '患者の酸素飽和度（室内気）':100,
         患者の症状のその他:'胸部Ｘ線両肺野スリガラス影',
         // 12.診断方法
         検出の種類:'分離・同定による病原体の検出',
         検出の検体:'唾液',
         検出の検体のその他:'あああああ',
         検出の検体の採取日:'08/27',
         // 13.年月日
         初診年月日:'03/08/27',
         '初診（検案（※））年月日':'03/08/27',
         感染したと推定される年月日:'03/08/27',
         発病年月日:'03/08/27',
         死亡年月日:'03/08/27',
         // 18.感染原因・感染経路・感染地域
         感染の経路と原因:'推定',
         感染の経路は飛沫か飛沫核:'同室者からの咳・くしゃみ',
         感染の経路は接触:'濃厚接触者（父）',
         感染の経路はその他:'',
         感染の地域:'確定',
         感染が国内の都道府県名:'東京',
         感染が国内の都道府県:'都',
         感染が国内の市区町村名:'千代田',
         感染が国内の市区町村:'区',
         感染が国外:'',
         感染が国外の詳細地域:'',
         感染が国外への出国日:'03/08/27',
         感染が国外での帰国日:'03/08/29',
         コロナのワクチン１回目の年齢:30,
         コロナのワクチン１回目の接種年月日:'03/08/27',
         コロナのワクチン１回目の種類:'mRNA',
         コロナのワクチン１回目の製造会社:'ファイザ',
         コロナのワクチン２回目の年齢:30,
         コロナのワクチン２回目の接種年月日:'03/08/27',
         コロナのワクチン２回目の種類:'mRNA',
         コロナのワクチン２回目の製造会社:'ファイザ',
         コロナのワクチン３回目の年齢:30,
         コロナのワクチン３回目の接種年月日:'03/08/27',
         コロナのワクチン３回目の種類:'mRNA',
         コロナのワクチン３回目の製造会社:'ファイザ',
          // 19.患者の症状のその他感染症のまん延の防止及び当該者の医療のために医師が必要と認める事項
          届出時点の入院有無:false,
          入院年月日:'03/08/27',
          重症化のリスク因子となる疾患等の有無:false,
          重症化のリスク因子:{
            悪性腫瘍:false,
            '慢性閉塞性肺疾患（COPD）':false,
            慢性腎臓病:false,
            高血圧:false,
            糖尿病:false,
            脂質異常症:false,
            '肥満（BMI30 以上）':false,
            喫煙歴:false
           },
           重症化のリスク因子のその他:'ああああ',
           免疫の機能の低下有無:false,
           妊娠の有無:false,
           重症度:'軽症',
           入院の必要性の有無:false,
           特例の診療の有無:false,
           メモ:'MEMO:'
        }
     },
     watch:{
       'app.fullscreen':function(){
         screenfull.toggle()
       },
       'param.患者の症状.なし':function(b){
         if(b){
           _(this.param.患者の症状).omit('なし').each((b,k)=>{
             this.param.患者の症状[k] = false
           })
         }
       },
       'param.重症化のリスク因子':{
         deep:true,
         handler:function(b){
           this.param.重症化のリスク因子となる疾患等の有無 = _.some(this.param.重症化のリスク因子)
         }
       }
     },
     created:async function(){

       setInterval(() => {
         this.timestamp = moment().valueOf()
       },1000);

       moment.locale('ja')
       localforage.getItem('reflet').then((o)=>{
         if(o){
           // this.param = o
         }         
       })
       this.pdf = await fetch(this.location.pdf).then((responce)=>{
         return responce.arrayBuffer()
       })
       this.font = await fetch(this.location.font).then((responce)=>{
         return responce.arrayBuffer()
       })
       this.update()
     },
     computed:{
       info:function(){
         return flattie(this.param)
       },
       attribute:function(){
         return{
          /*
           * 改訂:2021/11/29 18:03:58
           * 題名:新型コロナウイルス感染症 発生届
           * 作者:福島 銀史郎(fukushima-ginjirou)
           * 入手:https://www.mhlw.go.jp/bunya/kenkou/kekkaku-kansenshou11/01-shitei-01.html
           */
           Language:'ja',
           Title:'新型コロナウイルス感染症/発生届',
           Author:`Dr.${this.param.医師の氏名}/${this.param.医師の従事病院または診療所の名称}`,
           Subject:`Pt.${this.param.当該者の氏名}/${this.param.当該者の住所の電話番号}`,
           Keywords:['発生届','新型コロナウイルス','厚生労働省'],
           CreationDate:new Date(this.timestamp),
           ModificationDate:new Date(this.timestamp),
          /*
           * 厚生労働省からダウンロードしたＰＤＦをグーグルクロームで開いて、
           * メニュ・印刷・送信先をＰＤＦに設定して保存しています。
           * PDFLibに読み込むには変換が必要です。
           * ChromeはPDFiumを使います。
           * PDFiumは読み込めます。
           * 原因は不明
           */
           Creator:'PDFium',
          /*
           * pdfcreator vs. pdfproducer - PDF Metadata in Hyperref Hypersetup
           * https://tex.stackexchange.com/questions/590864/pdfcreator-vs-pdfproducer-pdf-metadata-in-hyperref-hypersetup
           */
           Producer:'COVID-19 Report Generator'
         }
       }
     },
     mounted:function(){
       $('input.mmdd').each(function(i,input){
         new Cleave(input, {    date: true,datePattern: ['m', 'd']})
       })
       $('input.yymmdd').each(function(i,input){
         new Cleave(input, {    date: true,datePattern: ['y', 'm', 'd']})
       })
       $('input.yyyymmdd').each(function(i,input){
         new Cleave(input, {    date: true,datePattern: ['Y', 'm', 'd']})
       })
       $('input.phone').each(function(i,input){
         new Cleave(input, {delimiter: '-',blocks: [3,4,4]})
       })
       $('input.birthday').each(function(i,input){
         new Cleave(input, {delimiter: '-',blocks: [4,2,2]})
       })
       $('.item',this.$refs.menu).tab({
         autoTabActivation:'a'
       })
       this.$watch('param',_.debounce(async(o)=>{
             localforage.setItem('reflet',o)
             this.update()
           },this.app.wait)
         ,{deep:true,immediate:true}
       )
     },
     methods:{
       clear:function(){
         var yes = ()=>{
           _.merge(this.param,{
             報告年月日 :'',
             // 00.報告者
             医師の氏名:'',
             医師の従事病院または診療所の名称 :'',
             医師の従事病院または診療所の所在地:'',
             医師の従事病院または診療所の電話番号:'',
             // 01.当該者
             当該者の類型:'患者（確定例）',
             当該者の氏名:'',
             当該者の性別:'男',
             当該者の生年月日:'',
             当該者の年齢:1,
             当該者の職業:'',
             当該者の住所:'',
             当該者の住所の電話番号:'',
             当該者の所在地:'',
             当該者の所在地の電話番号:'',
             // 09.保護者
             保護者の氏名:'',
             保護者の住所:'',
             保護者の電話番号:'',
             // 11.症状
             患者の症状:{
               発熱:true,
               咳:false,
               咳以外の急性呼吸器の症状:false,
               肺炎像:false,
               重篤な肺炎:false,
               急性呼吸窮迫症候群:false,
               多臓器不全:false,
               全身倦怠感:true,
               頭痛:false,
               '嘔気/嘔吐':true,
               下痢:false,
               結膜炎:false,
               '嗅覚・味覚障害':false,
               なし:false,
             },
             '患者の酸素飽和度（室内気）':100,
             患者の症状のその他:'',
             // 12.診断方法
             検出の種類:'検体から核酸増減法（ＰＣＲ法・ＬＡＭＰ法など）',
             検出の検体:'鼻咽頭拭い液',
             検出の検体のその他:'',
             検出の検体の採取日:'',
             // 13.年月日
             初診年月日:'',
             '初診（検案（※））年月日':'',
             感染したと推定される年月日:'',
             発病年月日:'',
             死亡年月日:'',
             // 18.感染原因・感染経路・感染地域
             感染の経路と原因:'不明',
             感染の経路は飛沫か飛沫核:'',
             感染の経路は接触:'',
             感染の経路はその他:'',
             感染の地域:'不明',
             感染が国内の都道府県名:'',
             感染が国内の都道府県:'',
             感染が国内の市区町村名:'',
             感染が国内の市区町村:'',
             感染が国外:'',
             感染が国外の詳細地域:'',
             感染が国外への出国日:'',
             感染が国外での帰国日:'',
             コロナのワクチン１回目の年齢:0,
             コロナのワクチン１回目の接種年月日:'',
             コロナのワクチン１回目の種類:'',
             コロナのワクチン１回目の製造会社:'',
             コロナのワクチン２回目の年齢:0,
             コロナのワクチン２回目の接種年月日:'',
             コロナのワクチン２回目の種類:'',
             コロナのワクチン２回目の製造会社:'',
             コロナのワクチン３回目の年齢:0,
             コロナのワクチン３回目の接種年月日:'',
             コロナのワクチン３回目の種類:'',
             コロナのワクチン３回目の製造会社:'',
             // 19.患者の症状のその他感染症のまん延の防止及び当該者の医療のために医師が必要と認める事項
             届出時点の入院有無:false,
             入院年月日:'',
             重症化のリスク因子となる疾患等の有無:false,
             重症化のリスク因子:{
               悪性腫瘍:false,
               '慢性閉塞性肺疾患（COPD）':false,
               慢性腎臓病:false,
               高血圧:false,
               糖尿病:false,
               脂質異常症:false,
               '肥満（BMI30 以上）':false,
               喫煙歴:false
            } , 
             重症化のリスク因子のその他:'',
             免疫の機能の低下有無:false,
             妊娠の有無:false,
             重症度:'軽症',
             入院の必要性の有無:false,
             特例の診療の有無:false,
             メモ:''
           })
           this.toast('info','入力をクリアしました！')
         }
           this.toast_confirm('warning','入力をクリアしますか？',yes)
       },
       save:async function(){
        /*
         * 設定
         */
         _.each(this.attribute,(value,name)=>this.doc[`set${name}`](value))
        /*
         * 保存
         * ファイル名
         * 書類は医事課が管理します。
         * 医事課は患者を２つの情報で参照します。
         * ２つの情報は「患者名」＋「患者の生年月日」です。
         * ファイル名は「保存日_保存日時_患者の生年月日_患者の氏名」です。
         */
         var filename = moment().format(`YYYY-MM-DD_HH-mm`)
         var username = `${this.param.当該者の生年月日.replace(/\//g,'-')}_${this.param.当該者の氏名}`
         var file = new File([await this.doc.save()],`${filename}_${username}.pdf`,{type:'application/pdf'})
         saveAs(file)
         // loading
         // micron
       },
       update:async function(){
         this.doc = await PDFLib.PDFDocument.load(this.pdf)
         
         // 設定
         this.doc.registerFontkit(fontkit)

         var highlightPen = {
           color:PDFLib.rgb.apply(null,_.values(tinycolor(this.color.mark).toFloatRgb())),
           opacity:0.5,
           thickness:9
         }
         var fontJP = await this.doc.embedFont(this.font)
         var page = this.doc.getPages()[0]
             page.setFont(fontJP)
             page.setFontColor(PDFLib.rgb.apply(null,_.values(tinycolor(this.color.font).toFloatRgb())))

             // 報告者
             page.drawText(this.param.報告年月日.split('/')[0] || '',{x:463,y:734,size:9})
             page.drawText(this.param.報告年月日.split('/')[1] || '',{x:490,y:734,size:9})
             page.drawText(this.param.報告年月日.split('/')[2] || '',{x:517,y:734,size:9})
             page.drawText(this.param.医師の氏名,{x:290,y:721,size:9})
             page.drawText(this.param.医師の従事病院または診療所の名称,{x:290,y:709,size:9})
             page.drawText(this.param.医師の従事病院または診療所の所在地,{x:290,y:697,size:9})
             page.drawText(this.param.医師の従事病院または診療所の電話番号.split('-')[0] || '',{x:285,y:685,size:9})
             page.drawText(this.param.医師の従事病院または診療所の電話番号.split('-')[1] || '',{x:346,y:685,size:9})
             page.drawText(this.param.医師の従事病院または診療所の電話番号.split('-')[2] || '',{x:405,y:685,size:9})
             page.drawLine(_.merge(
               {
                 '患者（確定例）'          :{start:{x:70,y:650},end:{x:130,y:650}},
                 '無患者の症状病原体保有者' :{start:{x:145,y:650},end:{x:230,y:650}},
                 '疑似症患者（*）'        :{start:{x:245,y:650},end:{x:315,y:650}},
                 '感染症死亡者の死体'     :{start:{x:325,y:650},end:{x:415,y:650}},
                 '感染症死亡疑い者の死体' :{start:{x:430,y:650},end:{x:530,y:650}}
               }[this.param.当該者の類型],
               highlightPen
             ))
             // 当該者
             page.drawText(this.param.当該者の氏名,{x:81,y:608,size:9})
             page.drawLine(_.merge(
               {
                 '男'         :{start:{x:196,y:612},end:{x:206,y:612}},
                 '女'         :{start:{x:214,y:612},end:{x:224,y:612}},
               }[this.param.当該者の性別],
               highlightPen
             ))
             page.drawText(this.param.当該者の生年月日.split('/')[0] || '',{x:238,y:609,size:9})
             page.drawText(this.param.当該者の生年月日.split('/')[1] || '',{x:271,y:609,size:9})
             page.drawText(this.param.当該者の生年月日.split('/')[2] || '',{x:301,y:609,size:9})

             if(this.param.当該者の生年月日 != ''){
               age = moment().age(new Date(this.param.当該者の生年月日))
               page.drawText(_.toString(age.years),{x:346,y:609,size:9})
              page.drawText(_.toString(age.months),{x:399,y:609,size:9})
             }





             page.drawText(this.param.当該者の職業,{x:448,y:609,size:9})

             page.drawText(this.param.当該者の住所,{x:140,y:594,size:9})
             page.drawText(this.param.当該者の住所の電話番号.split('-')[0] || '',{x:457,y:594,size:9})
             page.drawText(this.param.当該者の住所の電話番号.split('-')[1] || '',{x:485,y:594,size:9})
             page.drawText(this.param.当該者の住所の電話番号.split('-')[2] || '',{x:517,y:594,size:9})
             page.drawText(this.param.当該者の所在地,{x:140,y:581,size:9})
             page.drawText(this.param.当該者の所在地の電話番号.split('-')[0] || '',{x:457,y:581,size:9})
             page.drawText(this.param.当該者の所在地の電話番号.split('-')[1] || '',{x:485,y:581,size:9})
             page.drawText(this.param.当該者の所在地の電話番号.split('-')[2] || '',{x:517,y:581,size:9})
             // 保護者
             page.drawText(this.param.保護者の氏名,{x:81,y:556,size:9})
             page.drawText(this.param.保護者の住所,{x:198,y:556,size:9})
             page.drawText(this.param.保護者の電話番号.split('-')[0] || '',{x:457,y:556,size:9})
             page.drawText(this.param.保護者の電話番号.split('-')[1] || '',{x:485,y:556,size:9})
             page.drawText(this.param.保護者の電話番号.split('-')[2] || '',{x:517,y:556,size:9})

             // 患者の症状
             var 患者の症状 = 
             {
               '発熱'                   :{start:{x:91,y:533},end:{x:112,y:533}},
               '咳'                     :{start:{x:137,y:533},end:{x:147,y:533}},
               '咳以外の急性呼吸器の症状' :{start:{x:173,y:533},end:{x:273,y:533}},
               '肺炎像'                 :{start:{x:91,y:521},end:{x:121,y:521}},
               '重篤な肺炎'             :{start:{x:137,y:521},end:{x:184,y:521}},
               '急性呼吸窮迫症候群'     :{start:{x:200,y:521},end:{x:279,y:521}},
               '多臓器不全'             :{start:{x:91,y:509},end:{x:138,y:509}},
               '全身倦怠感'             :{start:{x:155,y:509},end:{x:202,y:509}},
               '頭痛'                   :{start:{x:218,y:509},end:{x:237,y:509}},
               '嘔気/嘔吐'              :{start:{x:253,y:509},end:{x:297,y:509}},
               '下痢'                   :{start:{x:91,y:497},end:{x:111,y:497}},
               '結膜炎'                 :{start:{x:137,y:497},end:{x:166,y:497}},
               '嗅覚・味覚障害'         :{start:{x:181,y:497},end:{x:247,y:497}},
               'なし'                  :{start:{x:258,y:472},end:{x:296,y:472}},
             }
             _(this.param.患者の症状).pickBy(_.identity).each((check,name)=>{
               page.drawLine(_.merge(患者の症状[name],highlightPen))
             })
             page.drawText(this.param['患者の酸素飽和度（室内気）'].toString(),{x:198,y:481,size:9})
             page.drawText(this.param.患者の症状のその他,{x:129,y:469,size:9})
             // 診断方法
             switch(this.param.検出の種類){
               case '分離・同定による病原体の検出':
                 page.drawLine(_.merge(
                 {
                   '喀痰'           :{start:{x:116,y:445},end:{x:137,y:445}},
                   '気管吸引液'      :{start:{x:143,y:445},end:{x:187,y:445}},
                   '肺胞洗浄液'      :{start:{x:195,y:445},end:{x:242,y:445}},
                   '咽頭拭い液'      :{start:{x:248,y:445},end:{x:294,y:445}},
                   '鼻腔吸引液'       :{start:{x:92,y:432},end:{x:137,y:432}},
                   '鼻腔拭い液'           :{start:{x:144,y:432},end:{x:189,y:432}},
                   '鼻咽頭拭い液'         :{start:{x:196,y:432},end:{x:252,y:432}},
                   '便'              :{start:{x:257,y:432},end:{x:266,y:432}},
                   '唾液'            :{start:{x:273,y:432},end:{x:293,y:432}},
                   '剖検材料'         :{start:{x:92,y:419},end:{x:128,y:419}}
                 }[this.param.検出の検体],
                   highlightPen
                 ))
                 page.drawText(this.param.検出の検体のその他,{x:176,y:416,size:9})
                 page.drawText(this.param.検出の検体の採取日.split('/')[0] || '',{x:162,y:402,size:9})
                 page.drawText(this.param.検出の検体の採取日.split('/')[1] || '',{x:190,y:402,size:9})
                 page.drawLine(_.merge({start:{x:131,y:394},end:{x:150,y:394}},highlightPen))
                 break
               case '検体から核酸増減法（ＰＣＲ法・ＬＡＭＰ法など）':
                 page.drawLine(_.merge(
                 {
                   '喀痰'           :{start:{x:116,y:348},end:{x:137,y:348}},
                   '気管吸引液'      :{start:{x:143,y:348},end:{x:187,y:348}},
                   '肺胞洗浄液'      :{start:{x:195,y:348},end:{x:242,y:348}},
                   '咽頭拭い液'      :{start:{x:248,y:348},end:{x:294,y:348}},
                   '鼻腔吸引液'           :{start:{x:92,y:335},end:{x:137,y:335}},
                   '鼻腔拭い液'           :{start:{x:144,y:335},end:{x:189,y:335}},
                   '鼻咽頭拭い液'         :{start:{x:196,y:335},end:{x:252,y:335}},
                   '便'              :{start:{x:257,y:335},end:{x:266,y:335}},
                   '唾液'            :{start:{x:273,y:335},end:{x:293,y:335}},
                   '剖検材料'         :{start:{x:92,y:318},end:{x:128,y:318}}
                 }[this.param.検出の検体],
                   highlightPen
                 ))
                 page.drawText(this.param.検出の検体のその他,{x:172,y:319,size:9})
                 page.drawText(this.param.検出の検体の採取日.split('/')[0] || '',{x:162,y:305,size:9})
                 page.drawText(this.param.検出の検体の採取日.split('/')[1] || '',{x:190,y:305,size:9})
                 page.drawLine(_.merge({start:{x:131,y:296},end:{x:150,y:296}},highlightPen))
                 break
               case '抗原定性検査による病原体の抗原の検出':
                 page.drawLine(_.merge(
                 {
                   '鼻腔拭い液'           :{start:{x:120,y:264},end:{x:165,y:264}},
                   '鼻咽頭拭い液'         :{start:{x:173,y:264},end:{x:228,y:264}}
                 }[this.param.検出の検体],
                   highlightPen
                 ))

                 page.drawText(this.param.検出の検体の採取日.split('/')[0] || '',{x:162,y:248,size:9})
                 page.drawText(this.param.検出の検体の採取日.split('/')[1] || '',{x:190,y:248,size:9})
                 page.drawLine(_.merge({start:{x:131,y:238},end:{x:150,y:238}},highlightPen))
                 break
               case '抗原定量検査による病原体の抗原の検出':
                 page.drawLine(_.merge(
                 {
                   '鼻腔拭い液'           :{start:{x:120,y:216},end:{x:165,y:205}},
                   '鼻咽頭拭い液'         :{start:{x:173,y:205},end:{x:228,y:205}},
                   '唾液'                 :{start:{x:236,y:205},end:{x:255,y:205}},
                 }[this.param.検出の検体],
                   highlightPen
                 ))

                 page.drawText(this.param.検出の検体の採取日.split('/')[0] || '',{x:162,y:190,size:9})
                 page.drawText(this.param.検出の検体の採取日.split('/')[1] || '',{x:190,y:190,size:9})
                 page.drawLine(_.merge({start:{x:131,y:180},end:{x:150,y:180}},highlightPen))
                 break
             }
             // 診断日
             {
              function stamp(date,y){
                page.drawText(date.split('/')[0] || '',{x:221,y:y,size:9})
                page.drawText(date.split('/')[1] || '',{x:246,y:y,size:9})
                page.drawText(date.split('/')[2] || '',{x:273,y:y,size:9})
              }
              stamp(this.param.初診年月日,126)
              stamp(this.param['初診（検案（※））年月日'],113)
              stamp(this.param['感染したと推定される年月日'],101)
              stamp(this.param['発病年月日'],88)
              stamp(this.param['死亡年月日'],75)
             }

             // 感染
             if(this.param.感染の経路と原因 != '不明'){
               page.drawLine(_.merge(
               {
                 '確定'           :{start:{x:416,y:518},end:{x:434,y:518}},
                 '推定'           :{start:{x:444,y:518},end:{x:464,y:518}},
               }[this.param.感染の経路と原因],
                 highlightPen
               ))
               page.drawText(this.param.感染の経路は飛沫か飛沫核,{x:327,y:495,size:9})
               page.drawText(this.param.感染の経路は接触,{x:327,y:475,size:9})
               page.drawText(this.param.感染の経路は接触,{x:364,y:465,size:9})
             }
             if(this.param.感染の地域 != '不明'){
               page.drawLine(_.merge(
               {
                 '確定'           :{start:{x:380,y:458},end:{x:400,y:458}},
                 '推定'           :{start:{x:407,y:458},end:{x:427,y:458}}
               }[this.param.感染の経路と原因],
                 highlightPen
               ))
               page.drawText(this.param.感染が国内の都道府県名,{x:372,y:445,size:9})
               page.drawLine(_.merge(
               {
                 '都'           :{start:{x:399,y:448},end:{x:408,y:448}},
                 '道'           :{start:{x:408,y:448},end:{x:417,y:448}},
                 '府'           :{start:{x:417,y:448},end:{x:426,y:448}},
                 '県'           :{start:{x:426,y:448},end:{x:435,y:448}}
               }[this.param.感染が国内の都道府県],
                 highlightPen
               ))
               page.drawText(this.param.感染が国内の市区町村名,{x:435,y:445,size:9})
               page.drawLine(_.merge(
               {
                 '市'           :{start:{x:472,y:448},end:{x:480,y:448}},
                 '区'           :{start:{x:481,y:448},end:{x:489,y:448}},
                 '町'           :{start:{x:489,y:448},end:{x:498,y:448}},
                 '村'           :{start:{x:499,y:448},end:{x:507,y:448}}
               }[this.param.感染が国内の市区町村],
                 highlightPen
               ))
               page.drawText(this.param.感染が国外,{x:355,y:435,size:9})
               page.drawText(this.param.感染が国外の詳細地域,{x:364,y:425,size:9})
               
             }

    {
      function stamp(date,x){
                page.drawText(date.split('/')[0] || '',{x:x,y:405,size:9})
                page.drawText(date.split('/')[1] || '',{x:x+18,y:405,size:9})
                page.drawText(date.split('/')[2] || '',{x:x+36,y:405,size:9})
              }
     
             stamp(this.param.感染が国外への出国日,397)
             stamp(this.param.感染が国外での帰国日,484)
    }






             if(this.param.コロナのワクチン１回目の年齢 == ''){
               page.drawLine(_.merge({start:{x:404,y:378},end:{x:413,y:378}},highlightPen))
             }else{
              page.drawText(_.toString(this.param.コロナのワクチン１回目の年齢),{x:367,y:375,size:9})
             }


             page.drawText(this.param.コロナのワクチン１回目の種類,{x:444,y:365,size:9})
             page.drawText(this.param.コロナのワクチン１回目の製造会社,{x:478,y:365,size:9})


             if(this.param.コロナのワクチン２回目の年齢 == ''){
               page.drawLine(_.merge({start:{x:404,y:348},end:{x:413,y:348}},highlightPen))
             }else{
               page.drawText(_.toString(this.param.コロナのワクチン２回目の年齢),{x:367,y:345,size:9})
             }
             page.drawText(this.param.コロナのワクチン２回目の種類,{x:444,y:335,size:9})
             page.drawText(this.param.コロナのワクチン２回目の製造会社,{x:478,y:335,size:9})


             if(this.param.コロナのワクチン３回目の年齢 == ''){
               page.drawLine(_.merge({start:{x:404,y:317},end:{x:413,y:317}},highlightPen))
             }else{
              page.drawText(_.toString(this.param.コロナのワクチン３回目の年齢),{x:367,y:315,size:9})
             }
             page.drawText(this.param.コロナのワクチン３回目の種類,{x:444,y:305,size:9})
             page.drawText(this.param.コロナのワクチン３回目の製造会社,{x:478,y:305,size:9})




             {
              function stamp(date,y){
                page.drawText(date.split('/')[0] || '',{x:377,y:y,size:9})
                page.drawText(date.split('/')[1] || '',{x:395,y:y,size:9})
                page.drawText(date.split('/')[2] || '',{x:412,y:y,size:9})
              }

               stamp(this.param.コロナのワクチン１回目の接種年月日,355)
               stamp(this.param.コロナのワクチン２回目の接種年月日,325)
               stamp(this.param.コロナのワクチン３回目の接種年月日,295)
             }
    

             // その他の症状感染症のまん延の防止及び当該者の医療のために医師が必要と認める事項
             page.drawLine(_.merge(this.param.届出時点の入院有無 ? {start:{x:408,y:261},end:{x:417,y:261}} : {start:{x:424,y:261},end:{x:433,y:261}},highlightPen))
             page.drawText(this.param.入院年月日.split('/')[0] || '',{x:444,y:246,size:9})
             page.drawText(this.param.入院年月日.split('/')[1] || '',{x:467,y:246,size:9})
             page.drawText(this.param.入院年月日.split('/')[2] || '',{x:493,y:246,size:9})


             page.drawLine(_.merge(this.param.重症化のリスク因子となる疾患等の有無 ? {start:{x:474,y:236},end:{x:483,y:236}} : {start:{x:490,y:236},end:{x:499,y:236  }},highlightPen))
             // 重症化のリスク因子
             var 重症化のリスク因子 = 
             {
               悪性腫瘍:{start:{x:330,y:212},end:{x:363,y:212}},
               '慢性閉塞性肺疾患（COPD）':{start:{x:370,y:212},end:{x:464,y:212}},
               慢性腎臓病:{start:{x:473,y:212},end:{x:516,y:212}},
               高血圧:{start:{x:330,y:200},end:{x:354,y:200}},

               糖尿病:{start:{x:362,y:200},end:{x:387,y:200}},
               脂質異常症:{start:{x:395,y:200},end:{x:437,y:200}},
               '肥満（BMI30 以上）':{start:{x:444,y:200},end:{x:512,y:200}},
               喫煙歴:{start:{x:330,y:188},end:{x:354,y:188}},
             }


               _(this.param.重症化のリスク因子).pickBy(_.identity).each((check,name)=>{
                 page.drawLine(_.merge(重症化のリスク因子[name],highlightPen))
               })

               page.drawText(this.param.重症化のリスク因子のその他,{x:397,y:185,size:9})


               page.drawLine(_.merge(this.param.免疫の機能の低下有無 ? {start:{x:490,y:164},end:{x:499,y:164}} : {start:{x:506,y:164},end:{x:515,y:164}},highlightPen))
               page.drawLine(_.merge(this.param.妊娠の有無 ? {start:{x:367,y:152},end:{x:377,y:152}} : {start:{x:383,y:152},end:{x:392,y:152}},highlightPen))

             


               page.drawLine(_.merge(
               {
                軽症:{start:{x:374,y:127},end:{x:392,y:127}},
               中等症Ⅰ:{start:{x:398,y:127},end:{x:432,y:127}},
               中等症Ⅱ:{start:{x:440,y:127},end:{x:472,y:127}},
               重症:{start:{x:480,y:127},end:{x:498,y:127}}
               }[this.param.重症度],
                 highlightPen
               ))

               page.drawLine(_.merge(this.param.入院の必要性の有無 ? {start:{x:399,y:115},end:{x:408,y:115}} : {start:{x:416,y:115},end:{x:424,y:115}},highlightPen))
               page.drawLine(_.merge(this.param.特例の診療の有無 ? {start:{x:354,y:75},end:{x:363,y:75}} : {start:{x:372,y:75},end:{x:381,y:75}},highlightPen))


               _.each(this.param.メモ.split('\n'),(line,i)=>{
                page.drawText(line,{x:246,y:32 - (i * 10),size:9})
               })



         // 読込
         this.$refs.iframe.src = await this.doc.saveAsBase64({dataUri:true})
       }
     }
   })
</script>

 <style>
   @import url('ttf/index.css');
   @import url('js/index.css');
   @import url('css/index.css');
</style>